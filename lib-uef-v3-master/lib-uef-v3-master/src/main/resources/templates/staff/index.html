<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Th∆∞ vi·ªán Tr·ª±c tuy·∫øn - B·∫£ng ƒëi·ªÅu khi·ªÉn Th·ªß th∆∞</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Wood & Beige Theme */
            --primary: #8B4513;         /* SaddleBrown (Main Wood) */
            --primary-light: #A0522D;   /* Sienna (Lighter Wood) */
            --primary-dark: #5C3317;    /* Darker Wood */
            --secondary: #D2B48C;       /* Tan (Accent Beige/Light Wood) */
            --light: #FAF0E6;           /* Linen (Main Background Beige) */
            --dark: #4A3B31;            /* Dark Brown (Main Text) */
            --card-bg: #FFFBF0;         /* Very Light Warm Off-White (for cards/inputs) */
            --text-on-primary: #FAF0E6; /* Light beige text for primary background */
            --text-on-secondary: #4A3B31;/* Dark brown text for secondary background */
            --text-light-custom: #795548; /* Lighter brown for secondary text */
            --footer-bg-custom: #3D2B1F; /* Very Dark Brown (Footer BG) */
            --footer-text-custom: #D3C5BC;/* Light Beige/Brown (Footer Text) */
            --footer-link-hover-custom: #FAF0E6; /* Linen for hover */
            --nav-bar-bg: rgba(255, 251, 240, 0.95); /* --card-bg with opacity */
            --box-shadow-base-color-rgb: 139, 69, 19; /* For box shadows */
            --border-subtle: #E0D6CC; /* A light brown border */
            --accordion-button-active-bg: rgba(139, 69, 19, 0.05); /* Primary wood with light alpha */

            /* Sidebar specific colors */
            --sidebar-bg: #FDF5E6; /* M√†u n·ªÅn sidebar */
            --sidebar-link-hover: #EADDCA; /* M√†u hover cho link sidebar */
        }

        body {
            font-family: var(--font-primary);
            background-color: var(--c-bg);
            color: var(--c-text-primary);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Navbar */
        .navbar {
            /* *** THAY ƒê·ªîI: N·ªÅn trong su·ªët v√† hi·ªáu ·ª©ng blur *** */
            background-color: rgba(253, 249, 243, 0.95);
            backdrop-filter: blur(8px);
            transition: all 0.3s ease;
            border-bottom: 1px solid var(--border-subtle);
        }

        .navbar-brand {
            color: var(--primary-dark) !important;
            font-family: 'Playfair Display', serif;
            font-size: 1.7rem;
            font-weight: 700;
        }
        .navbar-brand span {
            color: var(--primary);
        }

        .nav-link {
            color: var(--dark) !important;
            font-weight: 500;
            margin: 0 10px;
            position: relative;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            background-color: var(--primary);
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            transition: width 0.3s ease;
        }

        .nav-link:hover::after,
        .nav-link.active::after {
            width: 100%;
        }

        .nav-link.active {
            color: var(--primary) !important;
        }

        .user-avatar-icon, .user-notification-icon {
            color: var(--dark);
            font-size: 1.3rem;
            transition: color 0.2s ease;
        }
        .user-avatar-icon:hover, .user-notification-icon:hover {
            color: var(--primary);
        }
        .user-avatar-dropdown {
            border: 2px solid var(--border-subtle) !important;
        }
        .dropdown-username {
            color: var(--primary-dark);
            font-weight: 600;
        }
        .dropdown-item i {
            color: var(--primary-light);
        }
        .dropdown-item:hover i {
            color: var(--primary);
        }

        /* Hero Section (Librarian Home Banner) */
        /* Hero Section */
        /* Hero Section (Librarian Home Banner) */
        .staff-hero-section {
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
            background-image: url('https://images.unsplash.com/photo-1521587760476-6c12a4b040da?q=80&w=2070&auto=format&fit=crop');
            background-size: cover;
            background-position: center 30%;
            background-attachment: fixed;
        }

        .staff-hero-section::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            /* *** THAY ƒê·ªîI: L·ªõp ph·ªß ƒë∆∞·ª£c l√†m ƒë·∫≠m h∆°n ƒë·ªÉ tƒÉng ƒë·ªô t∆∞∆°ng ph·∫£n *** */
            background: linear-gradient(0deg, rgba(0, 0, 0, 0.75) 0%, rgba(0, 0, 0, 0.4) 100%);
            z-index: 1;
        }

        .staff-hero-section .container {
            position: relative; /* ƒê·∫£m b·∫£o n·ªôi dung n·∫±m tr√™n l·ªõp ph·ªß */
            z-index: 2;
            animation: fadeInScale 1s ease-out forwards;
        }

        .staff-hero-section h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3.8rem;
            /* *** THAY ƒê·ªîI: Hi·ªáu ·ª©ng shadow m·∫°nh h∆°n ƒë·ªÉ ch·ªØ n·ªïi b·∫≠t *** */
            text-shadow: 0 4px 15px rgba(0,0,0,0.6);
        }

        .staff-hero-section p {
            font-size: 1.4rem;
            /* *** THAY ƒê·ªîI: Hi·ªáu ·ª©ng shadow m·∫°nh h∆°n *** */
            text-shadow: 0 2px 8px rgba(0,0,0,0.7);
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Wrapper for Sidebar and Content */
        .wrapper {
            display: flex;
            width: 100%;
            flex: 1; /* Cho ph√©p wrapper m·ªü r·ªông ƒë·ªÉ ƒë·∫©y footer xu·ªëng */
        }

        /* Sidebar */
        #sidebar {
            width: 260px;
            min-width: 260px;
            background: var(--sidebar-bg);
            box-shadow: 2px 0 15px rgba(var(--box-shadow-base-color-rgb), 0.1);
            transition: all 0.3s;
            padding-top: 20px; /* Th√™m padding top ƒë·ªÉ sidebar kh√¥ng b·ªã d√≠nh v√†o navbar */
            position: sticky; /* Sidebar d√≠nh khi cu·ªôn */
            top: 70px; /* C√πng v·ªõi padding-top c·ªßa body */
            height: calc(100vh - 70px); /* ƒê·∫£m b·∫£o sidebar chi·∫øm h·∫øt chi·ªÅu cao c√≤n l·∫°i */
            overflow-y: auto; /* Cho ph√©p cu·ªôn n·∫øu n·ªôi dung sidebar d√†i */
        }

        .sidebar-header {
            padding: 20px;
            background: var(--card-bg);
            border-bottom: 1px solid var(--border-subtle);
            text-align: center;
        }

        .sidebar-header h3 {
            color: var(--primary);
            font-family: 'Playfair Display', serif;
            margin-bottom: 0;
            font-size: 1.8rem;
        }

        .sidebar-menu {
            padding: 10px 0;
            margin: 0;
        }

        .sidebar-menu .nav-item {
            font-weight: 500;
        }

        .sidebar-menu .nav-link {
            padding: 15px 20px;
            color: var(--dark);
            display: flex;
            align-items: center;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
        }

        .sidebar-menu .nav-link i {
            width: 30px;
            text-align: center;
            margin-right: 10px;
            font-size: 1.1rem;
        }

        .sidebar-menu .nav-link:hover {
            background: var(--sidebar-link-hover);
            color: var(--primary-dark);
        }

        .sidebar-menu .nav-link.active {
            background: var(--sidebar-link-hover);
            color: var(--primary);
            font-weight: 700;
            border-left-color: var(--primary);
        }

        /* Content Area */
        #content {
            flex-grow: 1;
            padding: 25px;
            overflow-y: auto;
        }

        .page-header {
            font-family: 'Playfair Display', serif;
            color: var(--primary);
            border-bottom: 2px solid var(--secondary);
            padding-bottom: 10px;
            margin-bottom: 25px;
            font-size: 2.2rem;
        }

        .card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-subtle);
            box-shadow: 0 4px 12px rgba(var(--box-shadow-base-color-rgb), 0.08);
            margin-bottom: 25px; /* Th√™m kho·∫£ng c√°ch d∆∞·ªõi m·ªói card */
        }

        .card-header {
            background-color: var(--sidebar-bg); /* M√†u n·ªÅn cho header card */
            border-bottom: 1px solid var(--border-subtle);
            color: var(--primary-dark);
            font-size: 1.1rem;
            padding: 15px 20px;
        }

        .btn-primary {
            background-color: var(--primary);
            border-color: var(--primary);
            color: var(--text-on-primary);
            padding: 8px 20px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background-color: var(--primary-light);
            border-color: var(--primary-light);
        }

        .btn-secondary {
            background-color: var(--secondary);
            border-color: var(--secondary);
            color: var(--text-on-secondary);
            padding: 8px 20px;
            border-radius: 5px;
        }
        .btn-secondary:hover {
            background-color: #C3A37C; /* Slightly darker tan */
            border-color: #C3A37C;
        }

        .btn-outline-primary {
            border-color: var(--primary);
            color: var(--primary);
        }
        .btn-outline-primary:hover {
            background-color: var(--primary);
            color: var(--text-on-primary);
        }

        .btn-outline-danger {
            border-color: #dc3545;
            color: #dc3545;
        }
        .btn-outline-danger:hover {
            background-color: #dc3545;
            color: #fff;
        }

        .btn-success {
            background-color: #28a745;
            border-color: #28a745;
            color: #fff;
        }
        .btn-success:hover {
            background-color: #218838;
            border-color: #1e7e34;
        }


        .table {
            background-color: var(--card-bg);
            margin-bottom: 0; /* Lo·∫°i b·ªè margin-bottom m·∫∑c ƒë·ªãnh c·ªßa table */
        }
        .table thead th {
            background-color: var(--sidebar-bg);
            color: var(--primary-dark);
            font-weight: 600;
            border-bottom: 2px solid var(--primary-light);
        }
        .table tbody tr:hover {
            background-color: var(--sidebar-link-hover);
        }
        .table .badge {
            font-size: 0.9em;
            padding: 0.5em 0.7em;
        }

        .form-control, .form-select {
            border-radius: 8px;
            border: 1px solid var(--border-subtle);
            background-color: var(--input-bg-custom);
            color: var(--dark);
            padding: 10px 15px;
        }
        .form-control::placeholder {
            color: var(--text-light-custom);
        }
        .form-control:focus, .form-select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 0.25rem rgba(var(--box-shadow-base-color-rgb), 0.25);
            background-color: var(--input-bg-custom);
        }

        /* Modal */
        .modal-content {
            background-color: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(var(--box-shadow-base-color-rgb), 0.15);
        }
        .modal-header {
            border-bottom: 1px solid var(--border-subtle);
            padding: 20px;
        }
        .modal-title {
            font-family: 'Playfair Display', serif;
            color: var(--primary);
        }
        .modal-footer {
            border-top: 1px solid var(--border-subtle);
            padding: 15px 20px;
        }

        /* Footer */
        footer {
            background-color: var(--footer-bg-custom);
            color: var(--footer-text-custom);
            padding: 60px 0 20px;
            margin-top: auto; /* ƒê·∫©y footer xu·ªëng cu·ªëi trang */
        }

        .footer-title {
            color: var(--light);
            font-weight: 600;
            margin-bottom: 25px;
            font-size: 1.3rem;
        }

        .footer-links {
            list-style: none;
            padding: 0;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: var(--footer-text-custom);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .footer-links a:hover {
            color: var(--footer-link-hover-custom);
            padding-left: 5px;
        }
        .footer-links i.me-2 {
            color: var(--footer-text-custom);
            transition: all 0.3s ease;
        }
        .footer-links a:hover i.me-2 {
            color: var(--footer-link-hover-custom);
        }

        .social-links {
            margin-top: 20px;
        }

        .social-links a {
            display: inline-block;
            width: 40px;
            height: 40px;
            line-height: 40px;
            text-align: center;
            background-color: rgba(250, 240, 230, 0.1);
            color: var(--footer-link-hover-custom);
            border-radius: 50%;
            margin-right: 10px;
            transition: all 0.3s ease;
        }

        .social-links a:hover {
            background-color: var(--primary);
            color: var(--text-on-primary);
            transform: translateY(-3px);
        }

        .footer-bottom {
            border-top: 1px solid rgba(250, 240, 230, 0.15);
            padding-top: 20px;
            margin-top: 40px;
            font-size: 0.9rem;
        }
        .footer-bottom p a {
            color: var(--footer-text-custom) !important;
            opacity: 0.8;
        }
        .footer-bottom p a:hover {
            color: var(--footer-link-hover-custom) !important;
            opacity: 1;
        }

        /* Responsive adjustments */
        @media (max-width: 992px) {
            #sidebar {
                margin-left: -260px; /* ·∫®n sidebar theo m·∫∑c ƒë·ªãnh tr√™n m√†n h√¨nh nh·ªè */
                position: fixed;
                top: 0;
                bottom: 0;
                height: 100vh;
                z-index: 1040; /* ƒê·∫£m b·∫£o sidebar n·∫±m tr√™n n·ªôi dung kh√°c khi m·ªü */
                padding-top: 0; /* Reset padding-top */
            }
            #sidebar.active {
                margin-left: 0;
            }
            .wrapper {
                flex-direction: column;
            }
            #content {
                width: 100%;
                padding: 15px;
            }
            body {
                padding-top: 56px; /* ƒêi·ªÅu ch·ªânh padding top cho m√†n h√¨nh nh·ªè */
            }
            .navbar.fixed-top {
                box-shadow: 0 2px 10px rgba(139, 69, 19, 0.07); /* Lu√¥n c√≥ shadow tr√™n mobile */
            }
            .staff-hero-section {
                height: 250px;
                margin-top: 0;
            }
            .staff-hero-section h1 {
                font-size: 2.5rem;
            }
            .staff-hero-section p {
                font-size: 1.1rem;
            }
            .page-header {
                font-size: 1.8rem;
            }
            .footer-bottom .col-md-6 {
                text-align: center !important;
                margin-bottom: 10px;
            }
            .footer-bottom .col-md-6.text-md-end {
                text-align: center !important;
            }
        }

        /* Toggle button for sidebar on small screens */
        .sidebar-toggle-btn {
            display: none; /* ·∫®n theo m·∫∑c ƒë·ªãnh */
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 1050; /* Cao h∆°n sidebar ƒë·ªÉ c√≥ th·ªÉ click */
            background-color: var(--primary);
            color: var(--text-on-primary);
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 1.2rem;
        }

        @media (max-width: 992px) {
            .sidebar-toggle-btn {
                display: block; /* Hi·ªÉn th·ªã tr√™n m√†n h√¨nh nh·ªè */
            }
        }

        /* Overlay khi sidebar m·ªü */
        .overlay {
            display: none;
            position: fixed;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1030; /* N·∫±m gi·ªØa sidebar v√† n·ªôi dung ch√≠nh */
        }
        .overlay.active {
            display: block;
        }

    </style>
</head>
<body>

<button class="btn sidebar-toggle-btn d-lg-none" id="sidebarToggle">
    <i class="fas fa-bars"></i>
</button>

<nav class="navbar navbar-expand-lg navbar-light fixed-top">
    <div class="container-fluid">
        <a class="navbar-brand ms-lg-0 ms-auto" href="/staff/dashboard"><i class="fas fa-book-open me-2"></i>Th∆∞ vi·ªán<span>S·ªë</span></a>
        <button class="navbar-toggler d-none" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
            </ul>
            <div class="d-flex align-items-center">
                <div th:if="${isAuthenticated}" class="d-flex align-items-center">
                    <span class="me-2 navbar-text d-none d-lg-inline" style="color: var(--dark); white-space: nowrap;">
                        Ch√†o <span th:text="${loggedInUserFullName != null ? loggedInUserFullName : 'Th·ªß th∆∞'}">Th·ªß th∆∞</span>!üëã
                    </span>

                    <div class="dropdown me-3">
                        <a href="#" class="nav-icon-link position-relative" id="notificationDropdownToggle" data-bs-toggle="dropdown" aria-expanded="false"
                           th:title="${unreadNotificationCount > 0 ? 'B·∫°n c√≥ ' + unreadNotificationCount + ' th√¥ng b√°o ch∆∞a ƒë·ªçc' : 'Kh√¥ng c√≥ th√¥ng b√°o m·ªõi'}">
                            <i class="fas fa-bell user-notification-icon"></i>
                            <span th:if="${unreadNotificationCount > 0}" id="notificationBadge"
                                  class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                                [[${unreadNotificationCount}]]
                            </span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end shadow notification-dropdown" aria-labelledby="notificationDropdownToggle">
                            <li class="notification-header">
                                <h6 class="mb-0">Th√¥ng b√°o</h6>
                                <a href="javascript:void(0);" id="markAllReadBtn">ƒê√°nh d·∫•u t·∫•t c·∫£ ƒë√£ ƒë·ªçc</a>
                            </li>
                            <li><hr class="dropdown-divider my-0"></li>

                            <li class="notification-body">
                                <ul class="list-unstyled mb-0" id="notificationList">
                                    <li>
                                        <a href="#" class="dropdown-item d-flex align-items-start py-2">
                                            <div class="flex-shrink-0 me-3">
                                                <i class="fas fa-exclamation-circle text-warning mt-1"></i>
                                            </div>
                                            <div class="flex-grow-1">
                                                <div class="fw-bold">S√°ch qu√° h·∫°n!</div>
                                                <small class="text-muted">ƒê·ªôc gi·∫£ Nguy·ªÖn VƒÉn A c√≥ s√°ch "Nh√† Gi·∫£ Kim" qu√° h·∫°n 5 ng√†y.</small>
                                                <div class="text-muted small">2 gi·ªù tr∆∞·ªõc</div>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#" class="dropdown-item d-flex align-items-start py-2">
                                            <div class="flex-shrink-0 me-3">
                                                <i class="fas fa-info-circle text-info mt-1"></i>
                                            </div>
                                            <div class="flex-grow-1">
                                                <div class="fw-bold">S√°ch m·ªõi v·ªÅ!</div>
                                                <small class="text-muted">ƒê√£ th√™m 10 b·∫£n "Harry Potter" v√†o kho.</small>
                                                <div class="text-muted small">H√¥m qua</div>
                                            </div>
                                        </a>
                                    </li>
                                </ul>

                                <div id="notificationEmptyState" style="display: none; text-align: center; padding: 20px;">
                                    <i class="far fa-envelope-open fa-2x text-muted mb-2"></i>
                                    <p class="mb-0 text-muted">B·∫°n ch∆∞a c√≥ th√¥ng b√°o n√†o.</p>
                                </div>
                            </li>

                            <li class="notification-footer">
                                <button class="btn-load-more" id="loadMoreBtn" style="width: 100%; border: none; background: none; color: var(--primary); padding: 10px 0; font-weight: 500;">
                                    T·∫£i th√™m
                                </button>
                            </li>
                        </ul>
                    </div>

                    <div class="dropdown">
                        <a href="#" class="d-block link-dark text-decoration-none dropdown-toggle" id="dropdownUserNavbar" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user-tie fa-lg user-avatar-icon"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end text-small shadow" aria-labelledby="dropdownUserNavbar">
                            <li class="px-3 py-2 text-center">
                                <img th:if="${loggedInUserAvatarUrl != null AND !loggedInUserAvatarUrl.isEmpty()}"
                                     th:src="${loggedInUserAvatarUrl}"
                                     alt="User Avatar" width="70" height="70"
                                     class="rounded-circle mb-2 border user-avatar-dropdown">
                                <div th:unless="${loggedInUserAvatarUrl != null AND !loggedInUserAvatarUrl.isEmpty()}"
                                     class="default-avatar-dropdown mb-2">
                                    <i class="fas fa-user-circle fa-4x text-muted"></i>
                                </div>
                                <h5 class="mb-0 dropdown-username"
                                    th:text="${loggedInUsername != null ? loggedInUsername : 'Th·ªß th∆∞'}">
                                    Th·ªß th∆∞
                                </h5>
                                <p class="text-muted mb-0 dropdown-email"
                                   th:text="${loggedInUserEmail != null ? loggedInUserEmail : 'email@thuvien.com'}">
                                    email@thuvien.com
                                </p>
                            </li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" th:href="@{/staff/profile}"><i class="fas fa-user-edit me-2"></i>Th√¥ng tin c√° nh√¢n</a></li>
                            <li><a class="dropdown-item" th:href="@{/staff/settings}"><i class="fas fa-cog me-2"></i>C√†i ƒë·∫∑t</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li>
                                <form th:action="@{/auth/logout}" method="post" class="d-block">
                                    <button type="submit" class="dropdown-item"><i class="fas fa-sign-out-alt me-2"></i>ƒêƒÉng xu·∫•t</button>
                                </form>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</nav>

<section class="staff-hero-section d-none d-lg-flex"> <div class="container">
    <h1>Ch√†o m·ª´ng, Th·ªß th∆∞!</h1>
    <p>B·∫£ng ƒëi·ªÅu khi·ªÉn to√†n di·ªán cho qu·∫£n l√Ω th∆∞ vi·ªán c·ªßa b·∫°n.</p>
</div>
</section>

<div class="wrapper">
    <nav id="sidebar">
        <div class="sidebar-header">
            <h3><i class="fas fa-cogs"></i> Qu·∫£n l√Ω Th∆∞ vi·ªán</h3>
        </div>

        <ul class="nav flex-column sidebar-menu nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
            <li class="nav-item">
                <a class="nav-link active" id="v-pills-dashboard-tab" data-bs-toggle="pill" href="#v-pills-dashboard" role="tab" aria-controls="v-pills-dashboard" aria-selected="true">
                    <i class="fas fa-tachometer-alt"></i> T·ªïng quan
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="v-pills-sach-tab" data-bs-toggle="pill" href="#v-pills-sach" role="tab" aria-controls="v-pills-sach" aria-selected="false">
                    <i class="fas fa-book"></i> Qu·∫£n l√Ω S√°ch
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="v-pills-docgia-tab" data-bs-toggle="pill" href="#v-pills-docgia" role="tab" aria-controls="v-pills-docgia" aria-selected="false">
                    <i class="fas fa-users"></i> Qu·∫£n l√Ω ƒê·ªôc gi·∫£
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="v-pills-muontra-tab" data-bs-toggle="pill" href="#v-pills-muontra" role="tab" aria-controls="v-pills-muontra" aria-selected="false">
                    <i class="fas fa-exchange-alt"></i> Qu·∫£n l√Ω M∆∞·ª£n/Tr·∫£
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="v-pills-baocao-tab" data-bs-toggle="pill" href="#v-pills-baocao" role="tab" aria-controls="v-pills-baocao" aria-selected="false">
                    <i class="fas fa-chart-pie"></i> B√°o c√°o & Th·ªëng k√™
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="v-pills-phiphat-tab" data-bs-toggle="pill" href="#v-pills-phiphat" role="tab" aria-controls="v-pills-phiphat" aria-selected="false">
                    <i class="fas fa-dollar-sign"></i> Qu·∫£n l√Ω Ph√≠ ph·∫°t
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="v-pills-thongbao-tab" data-bs-toggle="pill" href="#v-pills-thongbao" role="tab" aria-controls="v-pills-thongbao" aria-selected="false">
                    <i class="fas fa-bell"></i> H·ªá th·ªëng Th√¥ng b√°o
                </a>
            </li>
        </ul>
    </nav>

    <div id="content">
        <div class="tab-content" id="v-pills-tabContent">

            <div class="tab-pane fade show active" id="v-pills-dashboard" role="tabpanel" aria-labelledby="v-pills-dashboard-tab">
                <h2 class="page-header">T·ªïng quan Th∆∞ vi·ªán</h2>
                <div class="row g-4 mb-4">
                    <div class="col-md-4">
                        <div class="card text-center py-4">
                            <div class="card-body">
                                <i class="fas fa-book fa-3x text-primary mb-3"></i>
                                <h5 class="card-title text-muted">T·ªïng s·ªë s√°ch</h5>
                                <p class="card-text fs-2 fw-bold text-dark">5,200</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card text-center py-4">
                            <div class="card-body">
                                <i class="fas fa-users fa-3x text-success mb-3"></i>
                                <h5 class="card-title text-muted">T·ªïng s·ªë ƒë·ªôc gi·∫£</h5>
                                <p class="card-text fs-2 fw-bold text-dark">1,850</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card text-center py-4">
                            <div class="card-body">
                                <i class="fas fa-exchange-alt fa-3x text-warning mb-3"></i>
                                <h5 class="card-title text-muted">S√°ch ƒëang m∆∞·ª£n</h5>
                                <p class="card-text fs-2 fw-bold text-dark">450</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-6">
                        <div class="card mb-4">
                            <div class="card-header fw-bold text-primary">S√°ch qu√° h·∫°n n·ªïi b·∫≠t</div>
                            <div class="card-body">
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        <div>
                                            <div class="fw-bold">Nh√† Gi·∫£ Kim</div>
                                            <small class="text-muted">ƒê·ªôc gi·∫£: Nguy·ªÖn VƒÉn An (SV00123)</small>
                                        </div>
                                        <span class="badge bg-danger rounded-pill">Qu√° h·∫°n 5 ng√†y</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        <div>
                                            <div class="fw-bold">ƒê·∫Øc Nh√¢n T√¢m</div>
                                            <small class="text-muted">ƒê·ªôc gi·∫£: Tr·∫ßn Th·ªã B√≠ch (GV0045)</small>
                                        </div>
                                        <span class="badge bg-danger rounded-pill">Qu√° h·∫°n 2 ng√†y</span>
                                    </li>
                                    <li class="list-group-item text-center">
                                        <a href="#v-pills-muontra" data-bs-toggle="pill" class="text-primary text-decoration-none">Xem t·∫•t c·∫£ s√°ch qu√° h·∫°n <i class="fas fa-arrow-right ms-1"></i></a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card mb-4">
                            <div class="card-header fw-bold text-primary">Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y</div>
                            <div class="card-body">
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item d-flex align-items-center">
                                        <i class="fas fa-plus-circle text-success me-3"></i>
                                        <div>
                                            <div class="fw-bold">Th√™m s√°ch m·ªõi:</div>
                                            <small class="text-muted">ƒê√£ th√™m "Cu·ªôc ƒê·ªùi C·ªßa Pi" v√†o kho.</small>
                                            <div class="text-muted small">10 ph√∫t tr∆∞·ªõc</div>
                                        </div>
                                    </li>
                                    <li class="list-group-item d-flex align-items-center">
                                        <i class="fas fa-undo-alt text-info me-3"></i>
                                        <div>
                                            <div class="fw-bold">S√°ch ƒë√£ tr·∫£:</div>
                                            <small class="text-muted">ƒê·ªôc gi·∫£ Ph·∫°m VƒÉn D≈©ng ƒë√£ tr·∫£ "Ho√†ng T·ª≠ B√©".</small>
                                            <div class="text-muted small">1 gi·ªù tr∆∞·ªõc</div>
                                        </div>
                                    </li>
                                    <li class="list-group-item d-flex align-items-center">
                                        <i class="fas fa-user-plus text-primary me-3"></i>
                                        <div>
                                            <div class="fw-bold">ƒêƒÉng k√Ω th√†nh vi√™n m·ªõi:</div>
                                            <small class="text-muted">L√™ Minh Khang (SV00124) ƒë√£ ƒëƒÉng k√Ω.</small>
                                            <div class="text-muted small">H√¥m nay</div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="v-pills-sach" role="tabpanel" aria-labelledby="v-pills-sach-tab">
                <h2 class="page-header">Qu·∫£n l√Ω S√°ch v√† T√†i li·ªáu</h2>
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex justify-content-between mb-3 flex-wrap gap-2">
                            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addBookModal"><i class="fas fa-plus-circle"></i> Th√™m s√°ch m·ªõi</button>
                            <div>
                                <button class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#importBookModal"><i class="fas fa-file-import"></i> Import Excel</button>
                                </button>
                                <a th:href="@{/staff/books/export}" class="btn btn-outline-primary">
                                    <i class="fas fa-file-export"></i> Export B√°o c√°o
                                </a>
                            </div>
                        </div>
                        <p class="text-muted">Danh s√°ch to√†n b·ªô s√°ch trong th∆∞ vi·ªán.</p>
                        <div class="card mb-4">
                            <div class="card-header fw-bold text-primary">
                                <i class="fas fa-filter me-2"></i>T√¨m ki·∫øm & L·ªçc chi ti·∫øt
                            </div>
                            <div class="card-body">
                                <form th:action="@{/staff/dashboard}" method="GET" id="book-filter-form">
                                    <input type="hidden" name="tab" value="v-pills-sach">
                                    <input type="hidden" name="startsWith" id="startsWithInput" th:value="${param.startsWith}">

                                    <div class="row g-3 align-items-end">
                                        <div class="col-md-6">
                                            <label for="keyword" class="form-label">T√™n s√°ch / T√°c gi·∫£</label>
                                            <input type="text" class="form-control" id="keyword" name="keyword"
                                                   placeholder="Nh·∫≠p t√™n s√°ch, t√°c gi·∫£..." th:value="${param.keyword}">
                                        </div>

                                        <div class="col-md-3">
                                            <label for="filterCategory" class="form-label">Th·ªÉ lo·∫°i</label>
                                            <select class="form-select" id="filterCategory" name="categoryId">
                                                <option value="">T·∫•t c·∫£ th·ªÉ lo·∫°i</option>
                                                <option th:each="cat : ${categories}" th:value="${cat.id}" th:text="${cat.name}"
                                                        th:selected="${param.categoryId != null && #strings.equals(param.categoryId, cat.id)}"></option>
                                            </select>
                                        </div>

                                        <div class="col-md-3">
                                            <label for="filterAvailability" class="form-label">Tr·∫°ng th√°i</label>
                                            <select class="form-select" id="filterAvailability" name="availability">
                                                <option value="">T·∫•t c·∫£</option>
                                                <option value="available" th:selected="${#strings.equals(param.availability, 'available')}">C√≤n s√°ch</option>
                                                <option value="borrowed" th:selected="${#strings.equals(param.availability, 'borrowed')}">H·∫øt s√°ch</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="accordion mt-3" id="advancedFilterAccordion">
                                        <div class="accordion-item" style="background-color: transparent; border: none;">
                                            <h2 class="accordion-header" id="headingOne">
                                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                                        data-bs-target="#collapseAdvancedFilter" aria-expanded="false"
                                                        aria-controls="collapseAdvancedFilter"
                                                        style="padding-left: 0; background-color: transparent; box-shadow: none; color: var(--primary);">
                                                    L·ªçc theo NƒÉm xu·∫•t b·∫£n v√† Ch·ªØ c√°i ƒë·∫ßu
                                                </button>
                                            </h2>
                                            <div id="collapseAdvancedFilter" class="accordion-collapse collapse" aria-labelledby="headingOne"
                                                 data-bs-parent="#advancedFilterAccordion">
                                                <div class="accordion-body" style="padding: 1rem 0;">
                                                    <div class="row g-3 align-items-end">
                                                        <div class="col-md-3">
                                                            <label for="startYear" class="form-label">T·ª´ nƒÉm</label>
                                                            <input type="number" class="form-control" id="startYear" name="startYear"
                                                                   placeholder="VD: 1990" th:value="${param.startYear}">
                                                        </div>
                                                        <div class="col-md-3">
                                                            <label for="endYear" class="form-label">ƒê·∫øn nƒÉm</label>
                                                            <input type="number" class="form-control" id="endYear" name="endYear"
                                                                   placeholder="VD: 2025" th:value="${param.endYear}">
                                                        </div>
                                                    </div>
                                                    <div class="mt-3">
                                                        <label class="form-label">L·ªçc nhanh theo ch·ªØ c√°i ƒë·∫ßu c·ªßa t√™n s√°ch:</label>
                                                        <div class="d-flex flex-wrap gap-2 alphabet-filter">
                                                            <a th:href="@{/staff/dashboard(tab='v-pills-sach')}"
                                                               class="btn btn-sm"
                                                               th:classappend="${param.startsWith == null || param.startsWith.isEmpty()} ? 'btn-primary' : 'btn-outline-primary'">T·∫•t c·∫£</a>
                                                            <th:block th:each="char : ${'A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z'.split(',')}">
                                                                <a th:href="@{/staff/dashboard(tab='v-pills-sach', startsWith=${char})}"
                                                                   class="btn btn-sm"
                                                                   th:classappend="${#strings.equals(param.startsWith, char)} ? 'btn-primary' : 'btn-outline-primary'"
                                                                   th:text="${char}"></a>
                                                            </th:block>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="d-flex justify-content-end gap-2 mt-3 border-top pt-3">
                                        <a th:href="@{/staff/dashboard(tab='v-pills-sach')}" class="btn btn-secondary">
                                            <i class="fas fa-eraser me-1"></i> X√≥a b·ªô l·ªçc
                                        </a>
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-search me-1"></i> √Åp d·ª•ng
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-hover align-middle">
                                <thead>
                                <tr>
                                    <th>T√™n s√°ch</th>
                                    <th>T√°c gi·∫£</th>
                                    <th>Th·ªÉ lo·∫°i</th>
                                    <th>ISBN</th>
                                    <th>SL T·ªìn</th>
                                    <th>H√†nh ƒë·ªông</th>
                                </tr>
                                </thead>
                                <tbody th:if="${bookPage != null and !bookPage.isEmpty()}">
                                <tr th:each="book : ${bookPage.content}">
                                    <td><strong th:text="${book.title}">Nh√† Gi·∫£ Kim</strong></td>
                                    <td th:text="${book.author}">Paulo Coelho</td>
                                    <td th:text="${book.category != null ? book.category.name : 'N/A'}">Ti·ªÉu thuy·∫øt</td>
                                    <td th:text="${book.isbn}">978-604-399-073-6</td>
                                    <td>
                                            <span class="badge"
                                                  th:text="${book.availableCopies}"
                                                  th:classappend="${book.availableCopies > 10 ? 'bg-success' : (book.availableCopies > 0 ? 'bg-warning text-dark' : 'bg-danger')}">
                                                15
                                            </span>
                                    </td>
                                    <td>
                                        <a href="#" th:attr="data-book-id=${book.id}" class="btn btn-sm btn-outline-primary edit-book-btn" data-bs-toggle="modal" data-bs-target="#editBookModal">
                                            <i class="fas fa-edit"></i>
                                        </a>
                                        <a th:href="@{'/staff/books/delete/' + ${book.id}}" class="btn btn-sm btn-outline-danger" onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a s√°ch n√†y kh√¥ng?');"><i class="fas fa-trash"></i></a>
                                    </td>
                                </tr>
                                </tbody>
                                <tbody th:if="${bookPage == null or bookPage.isEmpty()}">
                                <tr>
                                    <td colspan="6" class="text-center py-4">
                                        <i class="fas fa-book-reader fa-2x text-muted mb-2"></i>
                                        <p class="mb-0">Kh√¥ng c√≥ s√°ch n√†o trong th∆∞ vi·ªán.</p>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>

                        <nav aria-label="Page navigation" class="mt-3" th:if="${bookPage != null and bookPage.totalPages > 1}">
                            <ul class="pagination justify-content-center">
                                <li class="page-item" th:classappend="${bookPage.isFirst()} ? 'disabled'">
                                    <a class="page-link" th:href="@{/staff/dashboard(tab='v-pills-sach', page=${bookPage.number - 1}, size=${bookPage.size})}">Tr∆∞·ªõc</a>
                                </li>

                                <li class="page-item" th:each="pageNumber : ${pageNumbers}" th:classappend="${pageNumber == bookPage.number + 1} ? 'active'">
                                    <a class="page-link" th:href="@{/staff/dashboard(tab='v-pills-sach', page=${pageNumber - 1}, size=${bookPage.size})}" th:text="${pageNumber}">1</a>
                                </li>

                                <li class="page-item" th:classappend="${bookPage.isLast()} ? 'disabled'">
                                    <a class="page-link" th:href="@{/staff/dashboard(tab='v-pills-sach', page=${bookPage.number + 1}, size=${bookPage.size})}">Sau</a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="v-pills-docgia" role="tabpanel" aria-labelledby="v-pills-docgia-tab">
                <h2 class="page-header">Qu·∫£n l√Ω ƒê·ªôc gi·∫£</h2>
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex justify-content-between mb-3 flex-wrap gap-2">
                            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addReaderModal"><i class="fas fa-user-plus"></i> ƒêƒÉng k√Ω th√†nh vi√™n m·ªõi</button>
                            <div>
                                <button class="btn btn-secondary"><i class="fas fa-file-import"></i> Import Danh s√°ch</button>
                                <button class="btn btn-outline-primary"><i class="fas fa-file-export"></i> Export Danh s√°ch</button>
                            </div>
                        </div>
                        <p class="text-muted">Danh s√°ch c√°c th√†nh vi√™n c·ªßa th∆∞ vi·ªán.</p>
                        <div class="table-responsive">
                            <table class="table table-hover align-middle">
                                <thead>
                                <tr>
                                    <th>H·ªç t√™n</th>
                                    <th>M√£ th·∫ª</th>
                                    <th>Email</th>
                                    <th>Ph√¢n lo·∫°i</th>
                                    <th>Tr·∫°ng th√°i</th>
                                    <th>Ng√†y h·∫øt h·∫°n</th>
                                    <th>H√†nh ƒë·ªông</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td><strong>Nguy·ªÖn VƒÉn An</strong></td>
                                    <td>SV00123</td>
                                    <td>an.nv@uef.edu.vn</td>
                                    <td>Sinh vi√™n</td>
                                    <td><span class="badge bg-success">Ho·∫°t ƒë·ªông</span></td>
                                    <td>31/12/2025</td>
                                    <td>
                                        <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#editReaderModal"><i class="fas fa-edit"></i></button>
                                        <button class="btn btn-sm btn-outline-danger"><i class="fas fa-user-times"></i></button>
                                    </td>
                                </tr>
                                <tr>
                                    <td><strong>Tr·∫ßn Th·ªã B√≠ch</strong></td>
                                    <td>GV0045</td>
                                    <td>bich.tt@uef.edu.vn</td>
                                    <td>Gi√°o vi√™n</td>
                                    <td><span class="badge bg-warning text-dark">S·∫Øp h·∫øt h·∫°n</span></td>
                                    <td>30/06/2025</td>
                                    <td>
                                        <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#editReaderModal"><i class="fas fa-edit"></i></button>
                                        <button class="btn btn-sm btn-outline-danger"><i class="fas fa-user-times"></i></button>
                                    </td>
                                </tr>
                                <tr>
                                    <td><strong>L√™ Th·ªã C√∫c</strong></td>
                                    <td>NV0078</td>
                                    <td>cuc.lt@uef.edu.vn</td>
                                    <td>Nh√¢n vi√™n</td>
                                    <td><span class="badge bg-danger">ƒê√£ h·∫øt h·∫°n</span></td>
                                    <td>31/05/2025</td>
                                    <td>
                                        <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#editReaderModal"><i class="fas fa-edit"></i></button>
                                        <button class="btn btn-sm btn-outline-danger"><i class="fas fa-user-times"></i></button>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <nav aria-label="Page navigation" class="mt-3">
                            <ul class="pagination justify-content-center">
                                <li class="page-item disabled"><a class="page-link" href="#">Tr∆∞·ªõc</a></li>
                                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item"><a class="page-link" href="#">Sau</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="v-pills-muontra" role="tabpanel" aria-labelledby="v-pills-muontra-tab">
                <h2 class="page-header">Qu·∫£n l√Ω M∆∞·ª£n/Tr·∫£ s√°ch</h2>
                <div class="row">
                    <div class="col-md-6">
                        <div class="card mb-4">
                            <div class="card-header fw-bold text-primary">CHO M∆Ø·ª¢N S√ÅCH</div>
                            <div class="card-body">
                                <form>
                                    <div class="mb-3">
                                        <label for="borrowerId" class="form-label">M√£ ƒë·ªôc gi·∫£</label>
                                        <input type="text" class="form-control" id="borrowerId" placeholder="Qu√©t m√£ v·∫°ch ho·∫∑c nh·∫≠p tay...">
                                    </div>
                                    <div class="mb-3">
                                        <label for="bookIdBorrow" class="form-label">M√£ s√°ch (ISBN)</label>
                                        <input type="text" class="form-control" id="bookIdBorrow" placeholder="Qu√©t m√£ v·∫°ch ho·∫∑c nh·∫≠p tay...">
                                    </div>
                                    <button type="submit" class="btn btn-primary w-100"><i class="fas fa-check-circle"></i> X√°c nh·∫≠n M∆∞·ª£n</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card mb-4">
                            <div class="card-header fw-bold text-primary">TR·∫¢ S√ÅCH</div>
                            <div class="card-body">
                                <form>
                                    <div class="mb-3">
                                        <label for="bookIdReturn" class="form-label">M√£ s√°ch (ISBN)</label>
                                        <input type="text" class="form-control" id="bookIdReturn" placeholder="Qu√©t m√£ v·∫°ch ho·∫∑c nh·∫≠p tay...">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">T√¨nh tr·∫°ng s√°ch</label>
                                        <select class="form-select">
                                            <option selected>T·ªët</option>
                                            <option>H∆∞ h·ªèng nh·∫π</option>
                                            <option>H∆∞ h·ªèng n·∫∑ng</option>
                                        </select>
                                    </div>
                                    <button type="submit" class="btn btn-primary w-100"><i class="fas fa-undo-alt"></i> X√°c nh·∫≠n Tr·∫£</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header fw-bold text-primary">DANH S√ÅCH S√ÅCH ƒêANG M∆Ø·ª¢N / QU√Å H·∫†N</div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-sm table-hover">
                                <thead>
                                <tr>
                                    <th>T√™n s√°ch</th>
                                    <th>ƒê·ªôc gi·∫£</th>
                                    <th>Ng√†y m∆∞·ª£n</th>
                                    <th>H·∫°n tr·∫£</th>
                                    <th>Tr·∫°ng th√°i</th>
                                    <th>H√†nh ƒë·ªông</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr class="table-danger">
                                    <td>T·ªôi √Åc v√† H√¨nh Ph·∫°t</td>
                                    <td>L√™ Th·ªã C√∫c</td>
                                    <td>01/05/2025</td>
                                    <td>15/05/2025</td>
                                    <td><span class="badge bg-danger">Qu√° h·∫°n 30 ng√†y</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-outline-primary"><i class="fas fa-envelope"></i> G·ª≠i nh·∫Øc nh·ªü</button>
                                        <button class="btn btn-sm btn-warning text-dark"><i class="fas fa-dollar-sign"></i> Ph·∫°t</button>
                                    </td>
                                </tr>
                                <tr class="table-warning">
                                    <td>Ho√†ng T·ª≠ B√©</td>
                                    <td>Ph·∫°m VƒÉn D≈©ng</td>
                                    <td>10/06/2025</td>
                                    <td>24/06/2025</td>
                                    <td><span class="badge bg-warning text-dark">S·∫Øp ƒë·∫øn h·∫°n</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-primary"><i class="fas fa-sync-alt"></i> Gia h·∫°n</button>
                                        <button class="btn btn-sm btn-outline-secondary"><i class="fas fa-info-circle"></i> Chi ti·∫øt</button>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <nav aria-label="Page navigation" class="mt-3">
                            <ul class="pagination justify-content-center">
                                <li class="page-item disabled"><a class="page-link" href="#">Tr∆∞·ªõc</a></li>
                                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item"><a class="page-link" href="#">Sau</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="v-pills-baocao" role="tabpanel" aria-labelledby="v-pills-baocao-tab">
                <h2 class="page-header">B√°o c√°o v√† Th·ªëng k√™</h2>
                <div class="row">
                    <div class="col-lg-7">
                        <div class="card mb-4">
                            <div class="card-header fw-bold text-primary">Top S√°ch ƒë∆∞·ª£c m∆∞·ª£n nhi·ªÅu nh·∫•t (Th√°ng 6/2025)</div>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item d-flex justify-content-between align-items-center">Nh√† Gi·∫£ Kim <span class="badge bg-primary rounded-pill">125 l∆∞·ª£t</span></li>
                                <li class="list-group-item d-flex justify-content-between align-items-center">ƒê·∫Øc Nh√¢n T√¢m <span class="badge bg-primary rounded-pill">98 l∆∞·ª£t</span></li>
                                <li class="list-group-item d-flex justify-content-between align-items-center">C√¢y Cam Ng·ªçt C·ªßa T√¥i <span class="badge bg-primary rounded-pill">76 l∆∞·ª£t</span></li>
                                <li class="list-group-item d-flex justify-content-between align-items-center">Ho√†ng T·ª≠ B√© <span class="badge bg-primary rounded-pill">60 l∆∞·ª£t</span></li>
                                <li class="list-group-item d-flex justify-content-between align-items-center">Th√°m T·ª≠ L·ª´ng Danh Conan <span class="badge bg-primary rounded-pill">55 l∆∞·ª£t</span></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-5">
                        <div class="card mb-4">
                            <div class="card-header fw-bold text-primary">T√πy ch·ªçn B√°o c√°o</div>
                            <div class="card-body">
                                <form>
                                    <div class="mb-3">
                                        <label for="reportType" class="form-label">Lo·∫°i b√°o c√°o</label>
                                        <select class="form-select" id="reportType">
                                            <option selected>L∆∞·ª£t m∆∞·ª£n/tr·∫£</option>
                                            <option>Danh s√°ch qu√° h·∫°n</option>
                                            <option>T√†i ch√≠nh ph√≠ ph·∫°t</option>
                                            <option>Th·ªëng k√™ s√°ch theo th·ªÉ lo·∫°i</option>
                                            <option>Th·ªëng k√™ ƒë·ªôc gi·∫£</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label for="reportStartDate" class="form-label">T·ª´ ng√†y</label>
                                        <input type="date" class="form-control" id="reportStartDate">
                                    </div>
                                    <div class="mb-3">
                                        <label for="reportEndDate" class="form-label">ƒê·∫øn ng√†y</label>
                                        <input type="date" class="form-control" id="reportEndDate">
                                    </div>
                                    <button class="btn btn-primary w-100"><i class="fas fa-file-download"></i> Xu·∫•t B√°o c√°o</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="v-pills-phiphat" role="tabpanel" aria-labelledby="v-pills-phiphat-tab">
                <h2 class="page-header">Qu·∫£n l√Ω Ph√≠ ph·∫°t</h2>
                <div class="card">
                    <div class="card-body">
                        <p class="text-muted">Danh s√°ch c√°c kho·∫£n ph√≠ ph·∫°t ch∆∞a thanh to√°n.</p>
                        <div class="table-responsive">
                            <table class="table table-hover align-middle">
                                <thead>
                                <tr>
                                    <th>ƒê·ªôc gi·∫£</th>
                                    <th>S√°ch qu√° h·∫°n</th>
                                    <th>S·ªë ng√†y tr·ªÖ</th>
                                    <th>S·ªë ti·ªÅn ph·∫°t</th>
                                    <th>Tr·∫°ng th√°i</th>
                                    <th>H√†nh ƒë·ªông</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>L√™ Th·ªã C√∫c</td>
                                    <td>T·ªôi √Åc v√† H√¨nh Ph·∫°t</td>
                                    <td>30</td>
                                    <td>60,000ƒë</td>
                                    <td><span class="badge bg-danger">Ch∆∞a thanh to√°n</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-success"><i class="fas fa-check"></i> ƒê√£ thu</button>
                                        <button class="btn btn-sm btn-outline-secondary"><i class="fas fa-gift"></i> Mi·ªÖn gi·∫£m</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Nguy·ªÖn VƒÉn An</td>
                                    <td>ƒê·∫Øc Nh√¢n T√¢m</td>
                                    <td>5</td>
                                    <td>10,000ƒë</td>
                                    <td><span class="badge bg-warning text-dark">Ch∆∞a thanh to√°n</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-success"><i class="fas fa-check"></i> ƒê√£ thu</button>
                                        <button class="btn btn-sm btn-outline-secondary"><i class="fas fa-gift"></i> Mi·ªÖn gi·∫£m</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Ph·∫°m VƒÉn D≈©ng</td>
                                    <td>Ho√†ng T·ª≠ B√©</td>
                                    <td>0</td>
                                    <td>0ƒë <span class="text-success">(ƒê√£ thanh to√°n)</span></td>
                                    <td><span class="badge bg-success">ƒê√£ thanh to√°n</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-outline-info" disabled><i class="fas fa-info-circle"></i> Chi ti·∫øt</button>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <nav aria-label="Page navigation" class="mt-3">
                            <ul class="pagination justify-content-center">
                                <li class="page-item disabled"><a class="page-link" href="#">Tr∆∞·ªõc</a></li>
                                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item"><a class="page-link" href="#">Sau</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="v-pills-thongbao" role="tabpanel" aria-labelledby="v-pills-thongbao-tab">
                <h2 class="page-header">H·ªá th·ªëng Th√¥ng b√°o</h2>
                <div class="card mb-4">
                    <div class="card-header fw-bold text-primary">G·ª≠i th√¥ng b√°o th·ªß c√¥ng</div>
                    <div class="card-body">
                        <form>
                            <div class="mb-3">
                                <label for="recipient" class="form-label">Ng∆∞·ªùi nh·∫≠n</label>
                                <input type="text" class="form-control" id="recipient" placeholder="Nh·∫≠p m√£ ƒë·ªôc gi·∫£, ho·∫∑c 'ALL' ƒë·ªÉ g·ª≠i t·∫•t c·∫£">
                            </div>
                            <div class="mb-3">
                                <label for="subject" class="form-label">Ti√™u ƒë·ªÅ</label>
                                <input type="text" class="form-control" id="subject" value="Th√¥ng b√°o t·ª´ Th∆∞ vi·ªán">
                            </div>
                            <div class="mb-3">
                                <label for="message" class="form-label">N·ªôi dung</label>
                                <textarea class="form-control" id="message" rows="5" placeholder="Nh·∫≠p n·ªôi dung th√¥ng b√°o..."></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary"><i class="fas fa-paper-plane"></i> G·ª≠i th√¥ng b√°o</button>
                        </form>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header fw-bold text-primary">L·ªãch s·ª≠ Th√¥ng b√°o ƒë√£ g·ª≠i</div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover align-middle">
                                <thead>
                                <tr>
                                    <th>Ng∆∞·ªùi g·ª≠i</th>
                                    <th>Ng∆∞·ªùi nh·∫≠n</th>
                                    <th>Ti√™u ƒë·ªÅ</th>
                                    <th>N·ªôi dung (t√≥m t·∫Øt)</th>
                                    <th>Th·ªùi gian g·ª≠i</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>H·ªá th·ªëng</td>
                                    <td>ALL</td>
                                    <td>Th√¥ng b√°o ng√†y l·ªÖ</td>
                                    <td>Th∆∞ vi·ªán s·∫Ω ƒë√≥ng c·ª≠a v√†o ng√†y 2/9...</td>
                                    <td>01/09/2025 09:00</td>
                                </tr>
                                <tr>
                                    <td>Th·ªß th∆∞ An</td>
                                    <td>SV00123</td>
                                    <td>Nh·∫Øc nh·ªü tr·∫£ s√°ch</td>
                                    <td>S√°ch "Nh√† Gi·∫£ Kim" c·ªßa b·∫°n ƒë√£ qu√° h·∫°n...</td>
                                    <td>17/06/2025 14:30</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <nav aria-label="Page navigation" class="mt-3">
                            <ul class="pagination justify-content-center">
                                <li class="page-item disabled"><a class="page-link" href="#">Tr∆∞·ªõc</a></li>
                                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item"><a class="page-link" href="#">Sau</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<div class="modal fade" id="addBookModal" tabindex="-1" aria-labelledby="addBookModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addBookModalLabel"><i class="fas fa-plus-circle me-2 text-primary"></i> Th√™m S√°ch M·ªõi</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form th:action="@{/staff/books/add}" th:object="${newBook}" method="post">
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-8 mb-3">
                            <label for="addBookTitle" class="form-label">T√™n s√°ch <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="addBookTitle" th:field="*{title}" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="addBookIsbn" class="form-label">ISBN <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="addBookIsbn" th:field="*{isbn}" required>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="addBookAuthor" class="form-label">T√°c gi·∫£</label>
                            <input type="text" class="form-control" id="addBookAuthor" th:field="*{author}">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="addBookCategory" class="form-label">Th·ªÉ lo·∫°i</label>
                            <select class="form-select" id="addBookCategory" name="categoryId" required>
                                <option value="" selected>Ch·ªçn th·ªÉ lo·∫°i...</option>
                                <option th:each="cat : ${categories}" th:value="${cat.id}" th:text="${cat.name}">Ti·ªÉu thuy·∫øt</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="addBookPublisher" class="form-label">Nh√† xu·∫•t b·∫£n</label>
                            <input type="text" class="form-control" id="addBookPublisher" th:field="*{publisher}">
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="addBookYear" class="form-label">NƒÉm xu·∫•t b·∫£n</label>
                            <input type="number" class="form-control" id="addBookYear" th:field="*{publicationYear}" min="1000" th:max="${#dates.year(#dates.createNow())}">
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="addBookQuantity" class="form-label">S·ªë l∆∞·ª£ng <span class="text-danger">*</span></label>
                            <input type="number" class="form-control" id="addBookQuantity" th:field="*{availableCopies}" value="1" min="1" required>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="addBookDescription" class="form-label">M√¥ t·∫£</label>
                        <textarea class="form-control" id="addBookDescription" th:field="*{description}" rows="3"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="addBookImageUrl" class="form-label">URL ·∫£nh b√¨a</label>
                        <input type="url" class="form-control" id="addBookImageUrl" th:field="*{coverImage}" placeholder="https://example.com/image.jpg">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> L∆∞u l·∫°i</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="modal fade" id="editBookModal" tabindex="-1" aria-labelledby="editBookModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editBookModalLabel"><i class="fas fa-edit me-2 text-primary"></i> Ch·ªânh s·ª≠a S√°ch</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form id="editBookForm" th:action="@{/staff/books/update/0}" method="post">
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-8 mb-3">
                            <label for="editBookTitle" class="form-label">T√™n s√°ch <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" name="title" id="editBookTitle" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="editBookIsbn" class="form-label">ISBN <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" name="isbn" id="editBookIsbn" required readonly>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="editBookAuthor" class="form-label">T√°c gi·∫£</label>
                            <input type="text" class="form-control" name="author" id="editBookAuthor">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="editBookCategory" class="form-label">Th·ªÉ lo·∫°i</label>
                            <select class="form-select" name="categoryId" id="editBookCategory" required>
                                <option value="">Ch·ªçn th·ªÉ lo·∫°i...</option>
                                <option th:each="cat : ${categories}" th:value="${cat.id}" th:text="${cat.name}"></option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="editBookPublisher" class="form-label">Nh√† xu·∫•t b·∫£n</label>
                            <input type="text" class="form-control" name="publisher" id="editBookPublisher">
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="editBookYear" class="form-label">NƒÉm xu·∫•t b·∫£n</label>
                            <input type="number" class="form-control" name="publicationYear" id="editBookYear" min="1000" max="2100">
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="editBookQuantity" class="form-label">S·ªë l∆∞·ª£ng <span class="text-danger">*</span></label>
                            <input type="number" class="form-control" name="availableCopies" id="editBookQuantity" min="0" required>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="editBookDescription" class="form-label">M√¥ t·∫£</label>
                        <textarea class="form-control" name="description" id="editBookDescription" rows="3"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="editBookImageUrl" class="form-label">URL ·∫£nh b√¨a</label>
                        <input type="url" class="form-control" name="coverImage" id="editBookImageUrl" placeholder="https://example.com/image.jpg">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> C·∫≠p nh·∫≠t</button>
                </div>
            </form>
        </div>
    </div>

</div>
<div class="modal fade" id="addReaderModal" tabindex="-1" aria-labelledby="addReaderModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addReaderModalLabel"><i class="fas fa-user-plus me-2 text-primary"></i> ƒêƒÉng k√Ω Th√†nh vi√™n M·ªõi</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="readerName" class="form-label">H·ªç v√† t√™n <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="readerName" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="readerId" class="form-label">M√£ ƒë·ªôc gi·∫£ <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="readerId" placeholder="VD: SVYYYYYY / GVYYYY" required>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="readerEmail" class="form-label">Email <span class="text-danger">*</span></label>
                            <input type="email" class="form-control" id="readerEmail" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="readerPhone" class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
                            <input type="tel" class="form-control" id="readerPhone">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="readerType" class="form-label">Ph√¢n lo·∫°i <span class="text-danger">*</span></label>
                            <select class="form-select" id="readerType" required>
                                <option selected disabled>Ch·ªçn ph√¢n lo·∫°i...</option>
                                <option value="Sinh vi√™n">Sinh vi√™n</option>
                                <option value="Gi√°o vi√™n">Gi√°o vi√™n</option>
                                <option value="Nh√¢n vi√™n">Nh√¢n vi√™n</option>
                                <option value="Kh√°c">Kh√°c</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="readerExpireDate" class="form-label">Ng√†y h·∫øt h·∫°n th·∫ª</label>
                            <input type="date" class="form-control" id="readerExpireDate">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="readerAddress" class="form-label">ƒê·ªãa ch·ªâ</label>
                        <input type="text" class="form-control" id="readerAddress">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                <button type="button" class="btn btn-primary"><i class="fas fa-save"></i> ƒêƒÉng k√Ω</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="editReaderModal" tabindex="-1" aria-labelledby="editReaderModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editReaderModalLabel"><i class="fas fa-user-edit me-2 text-primary"></i> Ch·ªânh s·ª≠a Th√¥ng tin ƒê·ªôc gi·∫£</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="editReaderName" class="form-label">H·ªç v√† t√™n <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="editReaderName" value="Nguy·ªÖn VƒÉn An" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="editReaderId" class="form-label">M√£ ƒë·ªôc gi·∫£ <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="editReaderId" value="SV00123" required disabled>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="editReaderEmail" class="form-label">Email <span class="text-danger">*</span></label>
                            <input type="email" class="form-control" id="editReaderEmail" value="an.nv@uef.edu.vn" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="editReaderPhone" class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
                            <input type="tel" class="form-control" id="editReaderPhone" value="0987654321">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="editReaderType" class="form-label">Ph√¢n lo·∫°i <span class="text-danger">*</span></label>
                            <select class="form-select" id="editReaderType" required>
                                <option value="Sinh vi√™n" selected>Sinh vi√™n</option>
                                <option value="Gi√°o vi√™n">Gi√°o vi√™n</option>
                                <option value="Nh√¢n vi√™n">Nh√¢n vi√™n</option>
                                <option value="Kh√°c">Kh√°c</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="editReaderExpireDate" class="form-label">Ng√†y h·∫øt h·∫°n th·∫ª</label>
                            <input type="date" class="form-control" id="editReaderExpireDate" value="2025-12-31">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="editReaderAddress" class="form-label">ƒê·ªãa ch·ªâ</label>
                        <input type="text" class="form-control" id="editReaderAddress" value="123 ƒê∆∞·ªùng ABC, Qu·∫≠n XYZ, TP.HCM">
                    </div>
                    <div class="mb-3">
                        <label for="editReaderStatus" class="form-label">Tr·∫°ng th√°i t√†i kho·∫£n</label>
                        <select class="form-select" id="editReaderStatus">
                            <option value="Ho·∫°t ƒë·ªông" selected>Ho·∫°t ƒë·ªông</option>
                            <option value="T·∫°m kh√≥a">T·∫°m kh√≥a</option>
                            <option value="V√¥ hi·ªáu h√≥a">V√¥ hi·ªáu h√≥a</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                <button type="button" class="btn btn-primary"><i class="fas fa-save"></i> C·∫≠p nh·∫≠t</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="importBookModal" tabindex="-1" aria-labelledby="importBookModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="importBookModalLabel"><i class="fas fa-file-import me-2 text-primary"></i> Import Danh s√°ch S√°ch</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form th:action="@{/staff/books/import}" method="post" enctype="multipart/form-data">
                <div class="modal-body">
                    <div th:if="${importError}" class="alert alert-danger" role="alert">
                        <strong>L·ªói!</strong> <span th:text="${importError}"></span>
                    </div>

                    <div class="mb-3">
                        <label for="bookExcelFile" class="form-label">Ch·ªçn file Excel (.xlsx):</label>
                        <input class="form-control" type="file" id="bookExcelFile" name="file" required accept=".xlsx">
                    </div>

                    <div class="alert alert-info" role="alert">
                        <h6 class="alert-heading"><i class="fas fa-info-circle"></i> H∆∞·ªõng d·∫´n</h6>
                        <p>File Excel c·∫ßn c√≥ c√°c c·ªôt theo ƒë√∫ng th·ª© t·ª± sau ƒë√¢y:</p>
                        <p class="mb-0"><code>ISBN</code> | <code>T√™n s√°ch</code> | <code>T√°c gi·∫£</code> | <code>Th·ªÉ lo·∫°i</code> | <code>Nh√† xu·∫•t b·∫£n</code> | <code>NƒÉm XB</code> | <code>S·ªë l∆∞·ª£ng</code></p>
                        <hr>
                        <a th:href="@{/templates/mau_import_sach.xlsx}" class="alert-link">T·∫£i file m·∫´u t·∫°i ƒë√¢y</a>.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-upload"></i> T·∫£i l√™n v√† X·ª≠ l√Ω</button>
                </div>
            </form>
        </div>
    </div>
</div>
<footer>
    <div class="container">
        <div class="row mb-5">
            <div class="col-md-4">
                <h4 class="footer-title">Th∆∞ vi·ªán S·ªë</h4>
                <p>H·ªá th·ªëng qu·∫£n l√Ω th∆∞ vi·ªán tr·ª±c tuy·∫øn hi·ªán ƒë·∫°i, gi√∫p k·∫øt n·ªëi ng∆∞·ªùi ƒë·ªçc v·ªõi kho t√†ng tri th·ª©c qua n·ªÅn t·∫£ng s·ªë.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
            <div class="col-md-4">
                <h4 class="footer-title">Li√™n k·∫øt nhanh</h4>
                <ul class="footer-links">
                    <li><a href="/staff/dashboard"><i class="fas fa-angle-right me-2"></i>T·ªïng quan</a></li>
                    <li><a href="/staff/books"><i class="fas fa-angle-right me-2"></i>Qu·∫£n l√Ω S√°ch</a></li>
                    <li><a href="/staff/members"><i class="fas fa-angle-right me-2"></i>Qu·∫£n l√Ω ƒê·ªôc gi·∫£</a></li>
                    <li><a href="/staff/borrow-return"><i class="fas fa-angle-right me-2"></i>M∆∞·ª£n/Tr·∫£ s√°ch</a></li>
                    <li><a href="/staff/reports"><i class="fas fa-angle-right me-2"></i>B√°o c√°o Th·ªëng k√™</a></li>
                </ul>
            </div>
            <div class="col-md-4">
                <h4 class="footer-title">Th√¥ng tin th∆∞ vi·ªán</h4>
                <ul class="footer-links">
                    <li><i class="fas fa-map-marker-alt me-2"></i>276 ƒêi·ªán Bi√™n Ph·ªß, P.17, Q.B√¨nh Th·∫°nh, TP.HCM</li>
                    <li><i class="fas fa-phone-alt me-2"></i>(028) 3838 6686</li>
                    <li><i class="fas fa-envelope me-2"></i>thuvienso@uef.edu.vn</li>
                    <li><i class="fas fa-clock me-2"></i>Th·ª© 2 - Th·ª© 6: 7:30 - 17:30</li>
                    <li><i class="fas fa-clock me-2"></i>Th·ª© 7: 8:00 - 16:00</li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom text-center">
            <div class="row">
                <div class="col-md-6 text-md-start mb-2 mb-md-0">
                    <p class="mb-0">¬© 2025 Th∆∞ vi·ªán S·ªë UEF. ƒê√£ ƒëƒÉng k√Ω b·∫£n quy·ªÅn.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0">
                        <a href="/terms" class="me-3">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a>
                        <a href="/privacy" >Ch√≠nh s√°ch b·∫£o m·∫≠t</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {

        const editBookModal = document.getElementById('editBookModal');
        if (editBookModal) {
            editBookModal.addEventListener('show.bs.modal', async function (event) {
                // N√∫t ƒë√£ ƒë∆∞·ª£c click ƒë·ªÉ m·ªü modal
                const button = event.relatedTarget;

                // L·∫•y bookId t·ª´ thu·ªôc t√≠nh data-book-id
                const bookId = button.getAttribute('data-book-id');

                // L·∫•y th·∫ª form
                const form = document.getElementById('editBookForm');

                // C·∫≠p nh·∫≠t action c·ªßa form ƒë·ªÉ tr·ªè ƒë·∫øn ƒë√∫ng ID s√°ch c·∫ßn update
                form.action = `/staff/books/update/${bookId}`;

                try {
                    // G·ªçi API ƒë·ªÉ l·∫•y th√¥ng tin chi ti·∫øt c·ªßa s√°ch
                    const response = await fetch(`/staff/books/api/${bookId}`);

                    if (!response.ok) {
                        alert('Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu s√°ch. Vui l√≤ng th·ª≠ l·∫°i.');
                        event.preventDefault(); // NgƒÉn modal hi·ªÉn th·ªã
                        return;
                    }

                    const book = await response.json();

                    // ƒêi·ªÅn d·ªØ li·ªáu s√°ch v√†o c√°c tr∆∞·ªùng trong form
                    form.querySelector('#editBookTitle').value = book.title || '';
                    form.querySelector('#editBookIsbn').value = book.isbn || '';
                    form.querySelector('#editBookAuthor').value = book.author || '';
                    form.querySelector('#editBookPublisher').value = book.publisher || '';
                    form.querySelector('#editBookYear').value = book.publicationYear || '';
                    form.querySelector('#editBookQuantity').value = book.availableCopies; // number n√™n kh√¥ng c·∫ßn || ''
                    form.querySelector('#editBookDescription').value = book.description || '';
                    form.querySelector('#editBookImageUrl').value = book.coverImage || '';

                    // Ch·ªçn ƒë√∫ng th·ªÉ lo·∫°i trong dropdown
                    if (book.category && book.category.id) {
                        form.querySelector('#editBookCategory').value = book.category.id;
                    } else {
                        form.querySelector('#editBookCategory').value = "";
                    }

                } catch (error) {
                    console.error('L·ªói khi l·∫•y th√¥ng tin s√°ch:', error);
                    alert('ƒê√£ x·∫£y ra l·ªói. Vui l√≤ng xem console ƒë·ªÉ bi·∫øt chi ti·∫øt.');
                    event.preventDefault(); // NgƒÉn modal hi·ªÉn th·ªã
                }
            });
        }

        // --- LOGIC G·ªêC C·ª¶A TRANG (Navbar, Sidebar, Tabs, Notifications) ---

        // ƒêi·ªÅu ch·ªânh padding top cho body d·ª±a tr√™n chi·ªÅu cao navbar
        const navbar = document.querySelector('.navbar.fixed-top');
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebarToggle');
        const overlay = document.createElement('div');
        overlay.classList.add('overlay');
        document.body.appendChild(overlay);

        function adjustLayout() {
            if (navbar) {
                const navHeight = navbar.offsetHeight;
                document.body.style.paddingTop = navHeight + 'px';
                if (window.innerWidth >= 992) {
                    sidebar.style.top = navHeight + 'px';
                    sidebar.style.height = `calc(100vh - ${navHeight}px)`;
                } else {
                    sidebar.style.top = '0';
                    sidebar.style.height = '100vh';
                }
            }
        }

        adjustLayout();
        window.addEventListener('resize', adjustLayout);

        // Hi·ªáu ·ª©ng co nh·ªè navbar khi cu·ªôn
        if (navbar) {
            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) {
                    navbar.style.paddingTop = '8px';
                    navbar.style.paddingBottom = '8px';
                    navbar.style.boxShadow = '0 2px 15px rgba(139, 69, 19, 0.1)';
                } else {
                    navbar.style.paddingTop = '12px';
                    navbar.style.paddingBottom = '12px';
                    navbar.style.boxShadow = '0 2px 10px rgba(139, 69, 19, 0.07)';
                }
            });
        }

        // Logic cho Sidebar Toggle tr√™n mobile
        if (sidebarToggle && sidebar && overlay) {
            sidebarToggle.addEventListener('click', function() {
                sidebar.classList.toggle('active');
                overlay.classList.toggle('active');
            });

            overlay.addEventListener('click', function() {
                sidebar.classList.remove('active');
                overlay.classList.remove('active');
            });
        }

        // ƒê√°nh d·∫•u nav-link active cho sidebar v√† x·ª≠ l√Ω hash URL
        const sidebarLinks = document.querySelectorAll('#v-pills-tab .nav-link');
        function activateTabFromHash() {
            let activeTabId = new URL(window.location.href).searchParams.get('tab') || 'v-pills-dashboard';

            // C·∫≠p nh·∫≠t hash URL m√† kh√¥ng reload trang (t√πy ch·ªçn)
            history.replaceState(null, '', `#${activeTabId}`);

            const tabToActivate = document.getElementById(`${activeTabId}-tab`);
            if(tabToActivate) {
                new bootstrap.Tab(tabToActivate).show();
            }
        }

        activateTabFromHash();

        sidebarLinks.forEach(link => {
            link.addEventListener('shown.bs.tab', function (event) {
                const newTabId = event.target.getAttribute('href').substring(1);
                history.pushState(null, '', `#${newTabId}`);
            });
        });

        window.addEventListener('popstate', function() {
            let activeTabId = window.location.hash.substring(1) || 'v-pills-dashboard';
            const tabToActivate = document.getElementById(`${activeTabId}-tab`);
            if(tabToActivate) {
                new bootstrap.Tab(tabToActivate).show();
            }
        });


        // Logic cho Notification Dropdown (gi·ªØ nguy√™n t·ª´ code g·ªëc)
        const notificationDropdownToggle = document.getElementById('notificationDropdownToggle');
        if (notificationDropdownToggle) {
            const notificationList = document.getElementById('notificationList');
            const notificationBadge = document.getElementById('notificationBadge');
            const markAllReadBtn = document.getElementById('markAllReadBtn');
            const loadMoreBtn = document.getElementById('loadMoreBtn');
            const emptyState = document.getElementById('notificationEmptyState');
            let currentNotificationPage = 0;
            let isLastPage = false;
            let isLoading = false;

            // H√†m gi·∫£ ƒë·ªãnh fetch notifications
            async function fetchNotifications(page) {
                // ƒê√¢y s·∫Ω l√† n∆°i b·∫°n g·ªçi API th·∫≠t ƒë·ªÉ l·∫•y th√¥ng b√°o
                console.log(`Fetching notifications for page: ${page}`);
                // M√¥ ph·ªèng d·ªØ li·ªáu ph·∫£n h·ªìi
                const dummyNotifications = [
                    { id: 1, type: 'warning', title: 'S√°ch qu√° h·∫°n!', content: 'ƒê·ªôc gi·∫£ Nguy·ªÖn VƒÉn A c√≥ s√°ch "Nh√† Gi·∫£ Kim" qu√° h·∫°n 5 ng√†y.', time: '2025-06-14T10:00:00Z', read: false },
                    { id: 2, type: 'info', title: 'S√°ch m·ªõi v·ªÅ!', content: 'ƒê√£ th√™m 10 b·∫£n "Harry Potter" v√†o kho.', time: '2025-06-13T15:30:00Z', read: false },
                    { id: 3, type: 'success', title: 'Giao d·ªãch th√†nh c√¥ng', content: 'ƒê·ªôc gi·∫£ Tr·∫ßn Th·ªã B ƒë√£ m∆∞·ª£n "ƒê·∫Øc Nh√¢n T√¢m".', time: '2025-06-12T09:00:00Z', read: true },
                    { id: 4, type: 'warning', title: 'Ph√≠ ph·∫°t m·ªõi', content: 'ƒê·ªôc gi·∫£ L√™ VƒÉn C b·ªã ph·∫°t 20.000ƒë.', time: '2025-06-11T11:00:00Z', read: false },
                ];

                return new Promise(resolve => {
                    setTimeout(() => {
                        const startIndex = page * 2; // V√≠ d·ª• m·ªói l·∫ßn t·∫£i 2 th√¥ng b√°o
                        const endIndex = startIndex + 2;
                        const notifications = dummyNotifications.slice(startIndex, endIndex);
                        isLastPage = endIndex >= dummyNotifications.length; // Ki·ªÉm tra xem c√≤n trang n√†o n·ªØa kh√¥ng
                        resolve({
                            notifications: notifications,
                            unreadCount: dummyNotifications.filter(n => !n.read).length
                        });
                    }, 500);
                });
            }

            function formatTimeAgo(isoDateString) {
                const now = new Date();
                const date = new Date(isoDateString);
                const seconds = Math.floor((now - date) / 1000);
                let interval = seconds / 31536000;
                if (interval > 1) return Math.floor(interval) + " nƒÉm tr∆∞·ªõc";
                interval = seconds / 2592000;
                if (interval > 1) return Math.floor(interval) + " th√°ng tr∆∞·ªõc";
                interval = seconds / 86400;
                if (interval > 1) return Math.floor(interval) + " ng√†y tr∆∞·ªõc";
                interval = seconds / 3600;
                if (interval > 1) return Math.floor(interval) + " gi·ªù tr∆∞·ªõc";
                interval = seconds / 60;
                if (interval > 1) return Math.floor(interval) + " ph√∫t tr∆∞·ªõc";
                return "v√†i gi√¢y tr∆∞·ªõc";
            }

            function createNotificationElement(notification) {
                const li = document.createElement('li');
                li.className = 'notification-item';
                if (!notification.read) {
                    li.classList.add('unread');
                }
                li.innerHTML = `
                <a href="#" class="dropdown-item d-flex align-items-start py-2" data-notification-id="${notification.id}">
                    <div class="flex-shrink-0 me-3">
                        <i class="fas fa-circle notification-read-status me-1" style="font-size: 0.7em; color: ${notification.read ? 'transparent' : 'var(--primary-light)'};"></i>
                        <i class="fas fa-${notification.type === 'warning' ? 'exclamation-circle text-warning' : (notification.type === 'info' ? 'info-circle text-info' : 'check-circle text-success')} mt-1"></i>
                    </div>
                    <div class="flex-grow-1">
                        <div class="fw-bold">${notification.title}</div>
                        <small class="text-muted">${notification.content}</small>
                        <div class="text-muted small">${formatTimeAgo(notification.time)}</div>
                    </div>
                </a>
            `;
                li.querySelector('a').addEventListener('click', function(e) {
                    e.preventDefault();
                    // Khi click v√†o th√¥ng b√°o, ƒë√°nh d·∫•u l√† ƒë√£ ƒë·ªçc v√† c√≥ th·ªÉ chuy·ªÉn h∆∞·ªõng
                    if (!notification.read) {
                        markNotificationAsRead(notification.id);
                        li.classList.remove('unread');
                        li.querySelector('.notification-read-status').style.color = 'transparent';
                    }
                    // Th√™m logic chuy·ªÉn h∆∞·ªõng ho·∫∑c hi·ªÉn th·ªã chi ti·∫øt th√¥ng b√°o t·∫°i ƒë√¢y
                    console.log('Clicked notification:', notification.id);
                });
                return li;
            }

            function checkEmptyState() {
                if (notificationList.children.length === 0) {
                    emptyState.style.display = 'block';
                    loadMoreBtn.style.display = 'none';
                    markAllReadBtn.style.display = 'none';
                } else {
                    emptyState.style.display = 'none';
                    loadMoreBtn.style.display = isLastPage ? 'none' : 'block';
                    markAllReadBtn.style.display = 'block';
                }
            }

            function renderNotifications(notifications, append = false) {
                if (!append) {
                    notificationList.innerHTML = '';
                }
                if (notifications && notifications.length > 0) {
                    notifications.forEach(notification => {
                        notificationList.appendChild(createNotificationElement(notification));
                    });
                }
                checkEmptyState();
            }

            async function loadNotifications(page) {
                if (isLoading) return;
                isLoading = true;
                loadMoreBtn.textContent = 'ƒêang t·∫£i...';
                try {
                    const data = await fetchNotifications(page);
                    renderNotifications(data.notifications, page > 0);
                    if (notificationBadge) {
                        const unreadCount = data.unreadCount;
                        notificationBadge.textContent = unreadCount > 99 ? '99+' : unreadCount;
                        notificationBadge.style.display = unreadCount > 0 ? 'block' : 'none';
                    }
                } catch (error) {
                    console.error("Error fetching notifications:", error);
                    // Hi·ªÉn th·ªã th√¥ng b√°o l·ªói
                } finally {
                    isLoading = false;
                    loadMoreBtn.textContent = 'T·∫£i th√™m';
                }
            }

            async function markNotificationAsRead(id) {
                console.log(`Marking notification ${id} as read`);
                // G·ªçi API ƒë·ªÉ ƒë√°nh d·∫•u ƒë√£ ƒë·ªçc
                if (notificationBadge) {
                    let currentCount = parseInt(notificationBadge.textContent) || 0;
                    if (currentCount > 0) {
                        currentCount--;
                        notificationBadge.textContent = currentCount > 99 ? '99+' : currentCount;
                        notificationBadge.style.display = currentCount > 0 ? 'block' : 'none';
                    }
                }
            }

            async function markAllNotificationsAsRead() {
                console.log('Marking all notifications as read');
                // G·ªçi API ƒë·ªÉ ƒë√°nh d·∫•u t·∫•t c·∫£ ƒë√£ ƒë·ªçc
                notificationList.querySelectorAll('.notification-item.unread').forEach(item => {
                    item.classList.remove('unread');
                    item.querySelector('.notification-read-status').style.color = 'transparent';
                });
                if (notificationBadge) {
                    notificationBadge.textContent = '0';
                    notificationBadge.style.display = 'none';
                }
            }


            loadNotifications(0); // T·∫£i trang ƒë·∫ßu ti√™n khi kh·ªüi t·∫°o
            loadMoreBtn.addEventListener('click', () => { currentNotificationPage++; loadNotifications(currentNotificationPage); });
            markAllReadBtn.addEventListener('click', (e) => { e.preventDefault(); e.stopPropagation(); markAllNotificationsAsRead(); });
        }
    });
</script>

</body>
</html>